%%%%%%%%%%%%%%%%%%%% MAPA
\section{TAD \tadNombre{Mapa}}
\begin{tad}{\tadNombre{Mapa}}
	\tadGeneros{mapa}
	\tadIgualdadObservacional{m}{m'}{Mapa}
                         {(posiciones(m) $\igobs$ posiciones(m')) $\land$ \\ 
                         ($\forall$ c1: Coordenada) \\
                         (conexionesDirectas(c1,m) $\igobs$ conexionesDirectas(c1,m')) }

		\tadExporta{Mapa,
            generadores,
            observadores}
		\tadUsa{\tadNombre{Bool},
        	\tadNombre{Coordenada},
        	\tadNombre{Conj()}}
	
	\tadObservadores
	\tadAlinearFunciones{conexionesDirectas~}{Coordenada/c, Mapa/m, Conj(Coordenada)}
	
    \tadOperacion{posiciones}{Mapa/m}{Conj(Coordenada)}{}
    \tadOperacion{conexionesDirectas}{Coordenada/c, Mapa/m}{Conj(Coordenada)}{}


	\tadGeneradores
	\tadAlinearFunciones{agCoordenada~}{Coordenada/c, Conj(Coordenada)/cs, Mapa/m, Mapa}
	\tadAlinearFunciones{conectarCoordenadas~}{Coordenada/c1, Coordenada/c2, Mapa/m, Mapa}
    \tadOperacion{crear}{}{Mapa}{}{}
    \tadOperacion{agCoordenada}{Coordenada/c, Mapa/m}{Mapa}
    	{c $\notin$ posiciones(m)}
    \tadOperacion{conectarCoordenadas}{Coordenada/c1, Coordenada/c2, Mapa/m}{Mapa}
    	{c1 $\neq$ c2 $\yluego$ c1,c2 $\in$ posiciones(m)}
    	
    \tadOtrasOperaciones
    \tadAlinearFunciones{existenCaminos~}{Coordenada/c1, Conj(Coordenada)/cs, Mapa/m, bool}
    \tadOperacion{existenCaminos}{Coordenada/c1, Conj(Coordenada)/cs, Mapa/m}{bool}{Ag(c1,cs) $\subseteq$ posiciones(m)}{}
    
    \tadAxiomas[\paratodo{Coordenada}{c, c1, c2} \paratodo{conj(Coordenada)}{cs} \paratodo{Mapa}{m}]
	\tadAxioma{posiciones(crear())}{$\emptyset$}
	\tadAxioma{posiciones(agCoordenada(c, m))}{Ag(c, posiciones(m))}
	\tadAxioma{posiciones(conectarCoordenadas(c1, c2, m))}{posiciones(m)}
	\tadAxioma{conexionesDirectas(c,crear())}{vacio}
	\tadAxioma{conexionesDirectas(c,agCoordenada(c1, m))}{conexionesDirectas(c,m)}
	\tadAxioma{conexionesDirectas(c,conectarCoordenadas(c1, c2, m))}{{\IF c=c1 THEN Ag(c2,conexionesDirectas(c,m)) ELSE {\IF c=c2 THEN Ag(c1,conexionesDirectas(c,m)) ELSE conexionesDirectas(c,m) FI} FI}}
	
	\tadAxioma{existeCamino(c1, c2,m}{\IF c2 $\in$ conexionesDirectas(c1,mapa) $\lor$ c1 $\in$ conexionesDirectas(c2,mapa) THEN true ELSE existenCaminos(conexionesDirectas(c1,m),c2,m) $\lor$ existenCaminos(conexionesDirectas(c2,m),c1,m) FI}
	\tadAxioma{existenCaminos(cs, c, m)}{\IF vacio?(cs) THEN false ELSE existeCamino( dameUno(cs),c, m) $\lor$ existenCaminos( sinUno(cs),c, m) FI}


    
\end{tad}